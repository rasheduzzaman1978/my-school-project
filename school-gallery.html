<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon" href="school_image/school_logo.jpg" type="image/x-icon">
<title>school-gallery</title>

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;500;700&display=swap" rel="stylesheet">

<style>
  :root{ --ink:#113D43; --brand:#4CAF50; }
  *{margin:0;padding:0;box-sizing:border-box}
  body{
    font-family:"Noto Sans Bengali","SutonnyMJ","Kalpurush",Arial,sans-serif;
    background:linear-gradient(135deg,#F0F2BD 0%,#B8CFCE 100%);
    min-height:100vh; line-height:1.6; color:var(--ink);
  }

  /* ===== NAVBAR ===== */
  .nav_bar{
    display:flex; align-items:center; justify-content:center;
    background:linear-gradient(135deg,#DDF6D2 0%,#C8E6C9 100%);
    padding:0 20px; position:sticky; top:0; z-index:1000;
    box-shadow:0 4px 15px rgba(0,0,0,.1); backdrop-filter:blur(10px);
    transition:all .3s ease; animation:fadeInUp .6s ease-out;
  }
  .nav_bar::before{content:''; position:absolute; inset:0; background:rgba(255,255,255,.1); backdrop-filter:blur(5px); z-index:-1}

  .nav-links{display:flex; align-items:center; gap:10px; flex-wrap:wrap; position:relative; justify-content:center}
  .nav_bar a{
    color:#113D43; font-size:20px; font-weight:500; padding:12px 16px; text-decoration:none;
    transition:all .3s cubic-bezier(.4,0,.2,1); white-space:nowrap; border-radius:8px; position:relative; overflow:hidden;
  }
  .nav_bar a::before{content:''; position:absolute; top:0; left:-100%; width:100%; height:100%; background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent); transition:left .5s ease}
  .nav_bar a:hover::before{left:100%}
  .nav_bar a:hover{background:linear-gradient(135deg,#4CAF50,#45a049); color:#fff; transform:none; box-shadow:0 4px 12px rgba(76,175,80,.25)}
  .nav_bar a:active{transform:translateY(0)}

  /* Dropdown */
  .dropdown{position:relative; display:inline-block}
  .dropdown > a{cursor:pointer}
  .dropdown-content{
    display:none; position:absolute; background:linear-gradient(135deg,#E8F5E9 0%,#C8E6C9 100%);
    min-width:200px; box-shadow:0 8px 16px rgba(0,0,0,.2); border-radius:8px; z-index:1001; overflow:hidden; transform:translateY(10px);
    opacity:0; transition:all .3s ease;
  }
  .dropdown-content a{display:block; padding:12px 16px; font-size:16px; color:#113D43; text-decoration:none; transition:all .3s ease}
  .dropdown-content a:hover{background:linear-gradient(135deg,#4CAF50,#45a049); color:#fff; transform:none}

  /* Desktop hover */
  @media (min-width:769px){
    .dropdown:hover .dropdown-content{display:block; transform:translateY(0); opacity:1}
    .nav_bar a{display:inline-flex; align-items:center; height:48px; will-change:transform}
  }

  /* Search Box */
  .search-box{
    display:flex; align-items:center; background:#fff; border-radius:25px; overflow:hidden;
    box-shadow:0 3px 10px rgba(0,0,0,.1); transition:all .3s ease;
    position:absolute; right:20px; top:50%; transform:translateY(-50%);
  }
  .search-box:focus-within{transform:translateY(-50%) scale(1.02); box-shadow:0 5px 20px rgba(0,0,0,.15)}
  .search-box input{padding:8px 16px; border:none; font-size:16px; outline:none; background:transparent; width:200px; font-family:inherit}
  .search-box input::placeholder{color:#999}
  .search-box button{padding:8px 13px; border:none; background:linear-gradient(135deg,#FEA405,#FF9800); color:#fff; cursor:pointer; font-size:16px; transition:all .3s ease; display:flex; align-items:center; justify-content:center}
  .search-box button:hover{background:linear-gradient(135deg,#FF9800,#F57C00); transform:scale(1.05)}

  /* Hamburger */
  .menu-toggle{display:none; font-size:24px; color:#386641; cursor:pointer; padding:8px; border-radius:8px; transition:all .3s ease; background:rgba(255,255,255,.1)}
  .menu-toggle:hover{background:rgba(255,255,255,.2); transform:scale(1.1)}
  .menu-toggle.rotated{transform:rotate(180deg); transition:transform .3s ease}

  /* Scroll effect */
  .nav_bar.scrolled{background:rgba(221,246,210,.95); backdrop-filter:blur(15px)}

  /* ===== Back to Home (fixed) ===== */
  .back-home{
    position:fixed; right:18px; bottom:18px;
    display:inline-flex; align-items:center; gap:8px;
    padding:10px 14px; border-radius:999px; text-decoration:none;
    background:linear-gradient(135deg,#4CAF50,#45a049); color:#fff; font-weight:700;
    box-shadow:0 6px 18px rgba(76,175,80,.28);
    z-index:3500;
  }
  .back-home:focus,.back-home:hover{transform:translateY(-1px); box-shadow:0 12px 28px rgba(76,175,80,.35);}

  /* ===== RESPONSIVE ===== */
  @media (max-width:1024px){
    .search-box input{width:150px}
    .nav_bar a{font-size:16px; padding:10px 12px}
    .dropdown-content{min-width:180px}
  }

  @media (max-width:768px){
    .nav_bar{flex-direction:column; align-items:center; padding:15px 20px 0; justify-content:center}
    .menu-toggle{display:block; position:absolute; top:15px; right:20px}

    .nav-links{
      flex-direction:column; width:100%; max-height:0; overflow:hidden; transition:max-height .5s ease-out; align-items:center;
    }
    .nav_bar.active .nav-links{max-height:850px; padding-bottom:5px}

    .nav_bar a{
      display:block; width:80%; text-align:center; padding:8px; margin:3px auto; border-radius:10px;
      background:rgba(255,255,255,.1); backdrop-filter:blur(5px);
      transform:translateX(-100px); opacity:0; transition:all .4s cubic-bezier(.4,0,.2,1);
    }
    .nav_bar.active a{transform:translateX(0); opacity:1}

    .dropdown{width:80%;}
    .dropdown-content{position:static; display:none; width:100%; box-shadow:none; background:rgba(255,255,255,.1); margin:5px 0; border-radius:8px; transform:none; opacity:1; transition:none;}
    .dropdown.active .dropdown-content{display:block}
    .dropdown-content a{padding:10px 15px; text-align:center; font-size:15px}

    .nav_bar.active .nav-links > a:nth-of-type(1){transition-delay:.05s}
    .nav_bar.active .nav-links > a:nth-of-type(2){transition-delay:.1s}
    .nav_bar.active .nav-links > a:nth-of-type(3){transition-delay:.15s}
    .nav_bar.active .nav-links > a:nth-of-type(4){transition-delay:.2s}
    .nav_bar.active .nav-links > a:nth-of-type(5){transition-delay:.25s}
    .nav_bar.active .nav-links > a:nth-of-type(6){transition-delay:.3s}
    .nav_bar.active .nav-links > a:nth-of-type(7){transition-delay:.35s}
    .nav_bar.active .nav-links > a:nth-of-type(8){transition-delay:.4s}

    .search-box{width:80%; margin:15px 0 10px; opacity:0; transform:translateY(-20px); transition:all .3s ease; position:static; right:auto; top:auto}
    .nav_bar.active .search-box{opacity:1; transform:translateY(0); transition-delay:.5s}
    .search-box input{flex:1; width:auto}
  }

  /* Animations (fade only; header removed) */
  @keyframes fadeInUp{from{opacity:0;transform:translateY(30px)} to{opacity:1;transform:translateY(0)}}

  @media (prefers-reduced-motion: reduce){
    .nav_bar a, .dropdown-content, .search-box, .menu-toggle {transition:none !important}
  }
  /* ===== Back to Home (fixed) ===== */
  .back-home{
    position:fixed; right:18px; bottom:18px; display:inline-flex; align-items:center; gap:8px;
    padding:10px 14px; border-radius:999px; text-decoration:none;
    background:linear-gradient(135deg,#4CAF50,#45a049); color:#fff; font-weight:700;
    box-shadow:0 6px 18px rgba(76,175,80,.28); z-index:3500;
  }

  /* ===== CONTENT ===== */
  .main-section{background:#fff;border-radius:12px;padding:30px 40px;box-shadow:0 4px 20px rgba(0,0,0,.1);margin:30px auto; max-width: 1200px;width: 100%;}
  .section-box{max-width:1200px;margin:0 auto;width:100%;background:#f9f9f9;border-radius:10px;padding:25px;box-shadow:0 3px 10px rgba(0,0,0,.06);border-left:4px solid #4CAF50;}
  .section-main-header{font-size:24px;font-weight:600;color:#1e293b;margin:0 0 20px 0;border-bottom:3px solid #3498db;padding-bottom:8px;text-align:center;}

  /* ===== Gallery Section ===== */
  .gallery-container{
    display:grid; grid-template-columns:repeat(auto-fill, minmax(280px, 1fr));
    gap:20px; padding:20px;
  }
  .gallery{position:relative;overflow:hidden;border-radius:10px;box-shadow:0 6px 15px rgba(0,0,0,.1);transition:transform .3s ease}
  .gallery img{width:100%;height:100%;object-fit:cover;transition:transform .3s ease;border-radius:10px;display:block}
  .gallery:hover img{transform:scale(1.06)}
  .gallery:hover{transform:scale(1.03)}

  /* ===== Lightbox (Zoomable) ===== */
  .lightbox{
    position:fixed; inset:0; background:rgba(0,0,0,.85);
    display:none; align-items:center; justify-content:center;
    z-index:4000; backdrop-filter:blur(4px);
  }
  .lightbox.open{ display:flex; animation:fadeInUp .25s ease; }
  .lb-shell{
    position:relative; width:min(96vw,1100px); height:min(92vh,820px);
    background:#0e0e0e; border-radius:14px; border:1px solid #2a2a2a;
    box-shadow:0 20px 60px rgba(0,0,0,.6); overflow:hidden;
    display:grid; grid-template-rows:auto 1fr auto;
  }
  .lb-header, .lb-footer{
    display:flex; align-items:center; justify-content:space-between;
    padding:10px 14px; background:linear-gradient(135deg,#1f2937,#111827); color:#e5e7eb;
  }
  .lb-title{ font-weight:600; }
  .lb-counter{ color:#cbd5e1; font-weight:500; }
  .ctrls{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
  .ctrl-btn{
    padding:8px 12px; border:none; border-radius:999px; font-weight:600; cursor:pointer;
    background:#1f2937; color:#e5e7eb; border:1px solid #374151; transition:.2s;
  }
  .ctrl-btn:hover{ transform:translateY(-1px); background:#111827; }
  .ctrl-btn.primary{ background:linear-gradient(135deg,#4CAF50,#45a049); border-color:transparent; color:#fff; }
  .ctrl-btn.danger{ background:linear-gradient(135deg,#e53935,#c62828); color:#fff; border-color:transparent; }

  .lb-stage{ position:relative; overflow:hidden; background:#000; touch-action:none; }
  .lb-img{
    position:absolute; top:50%; left:50%;
    transform:translate(-50%,-50%) scale(1);
    transform-origin:center center;
    max-width:100%; max-height:100%;
    user-select:none; -webkit-user-drag:none; pointer-events:none;
  }
  .lb-arrow{
    position:absolute; top:50%; transform:translateY(-50%);
    font-size:44px; width:56px; height:56px; display:flex; align-items:center; justify-content:center;
    color:#fff; background:rgba(0,0,0,.35); border:1px solid rgba(255,255,255,.15);
    border-radius:50%; cursor:pointer; z-index:10; user-select:none; opacity:.9;
  }
  .lb-arrow.left{ left:10px } .lb-arrow.right{ right:10px }
  .hint{
    position:absolute; bottom:10px; left:50%; transform:translateX(-50%);
    color:#9ca3af; font-size:12px; background:rgba(0,0,0,.4); padding:6px 10px; border-radius:999px;
  }

  /* ===== Responsive ===== */
  @media (max-width:1024px){
    .search-box input{width:150px}
    .nav_bar a{font-size:16px; padding:10px 12px}
    .dropdown-content{min-width:180px}
  }
  @media (max-width:768px){
    .nav_bar{flex-direction:column; align-items:center; padding:15px 20px 0}
    .menu-toggle{display:block; position:absolute; top:15px; right:20px}
    .nav-links{flex-direction:column; width:100%; max-height:0; overflow:hidden; transition:max-height .5s ease-out; align-items:center}
    .nav_bar.active .nav-links{max-height:850px; padding-bottom:5px}
    .nav_bar a{display:block; width:80%; text-align:center; padding:8px; margin:3px auto; border-radius:10px;background:rgba(255,255,255,.1)}
    .dropdown{width:80%;}
    .dropdown-content{position:static; display:none; width:100%; box-shadow:none; background:rgba(255,255,255,.1); margin:5px 0; border-radius:8px}
    .dropdown.active .dropdown-content{display:block}

    /* 🔽 মার্জড লজিক: মোবাইলে ডিফল্টে সার্চ বক্স হাইড, টগল মেনু খুললে দেখাবে */
    .search-box{
      display:none;  /* ডিফল্টে লুকনো */
      width:80%;
      margin:15px 0 10px;
      position:static;
      transform:none;
    }
    .nav_bar.active .search-box{
      display:flex; /* টগল মেনু খোলার পর দেখা যাবে */
    }

    .gallery-container{ grid-template-columns:repeat(auto-fill, minmax(200px, 1fr)); gap:15px; padding:15px }
    .lb-shell{ width:96vw; height:90vh; }
    .ctrl-btn{ padding:7px 10px; font-size:13px; }
    .lb-arrow{ width:48px; height:48px; font-size:38px; }
  }

  /* Animations */
  @keyframes fadeInUp{from{opacity:0;transform:translateY(30px)} to{opacity:1;transform:translateY(0)}}
  @media (prefers-reduced-motion: reduce){ .nav_bar a, .dropdown-content, .search-box, .menu-toggle {transition:none !important} }
</style>
</head>
<body>
 <!-- Navbar -->

  <nav class="nav_bar" id="navbar" aria-label="প্রধান নেভিগেশন">
    <div class="nav-links" id="navLinks">
      <a href="#school-info">বিদ্যালয়ের তথ্য</a>
      <a href="#teachers">শিক্ষক</a>
      <a href="#students">শিক্ষার্থী</a>
      <a href="#results">ফলাফল</a>
      <a href="#notices">নোটিশ বোর্ড</a>
      <a href="#gallery">গ্যালারি</a>
      <a href="#admission">ভর্তি</a>
      <a href="#advice">পরামর্শ</a>

      <!-- Dropdown -->
      <div class="dropdown" id="dropdown">
        <a id="othersMenu" role="button" tabindex="0" aria-haspopup="true" aria-expanded="false" aria-controls="othersPanel">অন্যান্য ▼</a>
        <div class="dropdown-content" id="othersPanel" role="menu" aria-label="অন্যান্য">
          <a href="#sub1" role="menuitem">সাব-মেনু ১</a>
          <a href="#sub2" role="menuitem">সাব-মেনু ২</a>
          <a href="#sub3" role="menuitem">সাব-মেনু ৩</a>
          <a href="#sub4" role="menuitem">সাব-মেনু ৪</a>
          <a href="#sub5" role="menuitem">সাব-মেনু ৫</a>
        </div>
      </div>

      <a href="#contact">যোগাযোগ</a>
    </div>

    <div class="search-box">
      <input type="text" placeholder="অনুসন্ধান করুন..." id="searchInput" aria-label="সার্চ">
      <button type="button" id="searchBtn" aria-label="সার্চ করুন">🔍</button>
    </div>

    <button class="menu-toggle" id="menuToggle" aria-label="মেনু টগল" aria-expanded="false" aria-controls="navLinks">☰</button>
  </nav>

  <!-- Back to Home Button -->
  <a href="index.html" class="back-home" aria-label="হোমে ফিরে যান">🏠 হোম</a>



  <!-- Gallery Section -->
  <section class="main-section content-teachers" id="gallery">
    <div class="section-box">
      <div class="section-main-header">বিদ্যালয়ের বিভিন্ন ইমেজ</div>
      <div class="gallery-container" id="galleryContainer">
        <!-- থাম্বনেইল -->
        <div class="gallery"><a href="#" onclick="openModal('school_image/img1.jpg');return false;"><img src="school_image/img1.jpg" alt=""></a></div>
        <div class="gallery"><a href="#" onclick="openModal('school_image/img3.jpg');return false;"><img src="school_image/img3.jpg" alt=""></a></div>
        <div class="gallery"><a href="#" onclick="openModal('school_image/img4.jpg');return false;"><img src="school_image/img4.jpg" alt=""></a></div>
        <div class="gallery"><a href="#" onclick="openModal('school_image/img5.jpg');return false;"><img src="school_image/img5.jpg" alt=""></a></div>
        <div class="gallery"><a href="#" onclick="openModal('school_image/img6.jpg');return false;"><img src="school_image/img6.jpg" alt=""></a></div>
        <div class="gallery"><a href="#" onclick="openModal('school_image/img7.jpg');return false;"><img src="school_image/img7.jpg" alt=""></a></div>
        <div class="gallery"><a href="#" onclick="openModal('school_image/img12.jpg');return false;"><img src="school_image/img12.jpg" alt=""></a></div>
        <div class="gallery"><a href="#" onclick="openModal('school_image/img13.jpg');return false;"><img src="school_image/img13.jpg" alt=""></a></div>
        <div class="gallery"><a href="#" onclick="openModal('school_image/img15.jpg');return false;"><img src="school_image/img15.jpg" alt=""></a></div>
        <div class="gallery"><a href="#" onclick="openModal('school_image/img16.jpg');return false;"><img src="school_image/img16.jpg" alt=""></a></div>
        <div class="gallery"><a href="#" onclick="openModal('school_image/img17.jpg');return false;"><img src="school_image/img17.jpg" alt=""></a></div>
        <div class="gallery"><a href="#" onclick="openModal('school_image/img18.jpg');return false;"><img src="school_image/img18.jpg" alt=""></a></div>
        <div class="gallery"><a href="#" onclick="openModal('school_image/img19.jpg');return false;"><img src="school_image/img19.jpg" alt=""></a></div>
        <div class="gallery"><a href="#" onclick="openModal('school_image/img22.jpg');return false;"><img src="school_image/img22.jpg" alt=""></a></div>
        <div class="gallery"><a href="#" onclick="openModal('school_image/img23.jpg');return false;"><img src="school_image/img23.jpg" alt=""></a></div>
        <div class="gallery"><a href="#" onclick="openModal('school_image/img27.jpg');return false;"><img src="school_image/img27.jpg" alt=""></a></div>
        <div class="gallery"><a href="#" onclick="openModal('school_image/img28.jpg');return false;"><img src="school_image/img28.jpg" alt=""></a></div>
        <div class="gallery"><a href="#" onclick="openModal('school_image/img30.jpg');return false;"><img src="school_image/img30.jpg" alt=""></a></div>
        <div class="gallery"><a href="#" onclick="openModal('school_image/img31.jpg');return false;"><img src="school_image/img31.jpg" alt=""></a></div>
        <div class="gallery"><a href="#" onclick="openModal('school_image/img32.jpg');return false;"><img src="school_image/img32.jpg" alt=""></a></div>
        <div class="gallery"><a href="#" onclick="openModal('school_image/img34.jpg');return false;"><img src="school_image/img34.jpg" alt=""></a></div>
      </div>
    </div>
  </section>

  <!-- Lightbox -->
  <div id="lightbox" class="lightbox" role="dialog" aria-modal="true" aria-labelledby="lbTitle">
    <div class="lb-shell">
      <div class="lb-header">
        <div class="lb-title" id="lbTitle">Image</div>
        <div class="ctrls">
          <button class="ctrl-btn" id="zoomOut" title="জুম আউট ( - )">−</button>
          <button class="ctrl-btn" id="zoomIn" title="জুম ইন ( + )">＋</button>
          <button class="ctrl-btn" id="zoomReset" title="রিসেট ( 1:1 )">1:1</button>
          <a class="ctrl-btn primary" id="downloadBtn" href="#" download title="ডাউনলোড">⬇ ডাউনলোড</a>
          <button class="ctrl-btn danger" id="lbCloseTop" title="বন্ধ করুন">✖</button>
        </div>
      </div>

      <div class="lb-stage" id="lbStage">
        <img id="lbImg" class="lb-img" alt="" loading="lazy">
        <div class="lb-arrow left" id="arrowLeft" aria-label="পূর্বের">⟨</div>
        <div class="lb-arrow right" id="arrowRight" aria-label="পরের">⟩</div>
        <div class="hint">ডাবল-ক্লিক: জুম / মাউস হুইল: জুম / ড্র্যাগ: প্যান / ← → : নেভিগেট / Esc: বন্ধ</div>
      </div>

      <div class="lb-footer">
        <div class="lb-counter" id="lbCounter">1 / 1</div>
        <div class="ctrls">
          <button class="ctrl-btn" id="lbPrev">⟨ পূর্বের</button>
          <button class="ctrl-btn" id="lbNext">পরের ⟩</button>
          <button class="ctrl-btn danger" id="lbClose">বন্ধ</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Back to Home Button -->
  <a href="image-gallery.html" class="back-home" aria-label="হোমে ফিরে যান">🏠 হোম</a>

<script>
  const navbar = document.getElementById('navbar');
  const menuToggle = document.getElementById('menuToggle');
  const dropdown = document.getElementById('dropdown');
  const othersMenu = document.getElementById('othersMenu');
  const navLinksContainer = document.getElementById('navLinks');
  const navLinks = navLinksContainer.querySelectorAll('a[href^="#"]');
  const searchInput = document.getElementById('searchInput');
  const searchBtn = document.getElementById('searchBtn');

  // Menu helpers
  function openMenu(){
    navbar.classList.add('active');
    menuToggle.textContent = '✖';
    menuToggle.classList.add('rotated');
    menuToggle.setAttribute('aria-expanded','true');
  }
  function closeMenu(){
    navbar.classList.remove('active');
    menuToggle.textContent = '☰';
    menuToggle.classList.remove('rotated');
    menuToggle.setAttribute('aria-expanded','false');
    dropdown.classList.remove('active');
    othersMenu.setAttribute('aria-expanded','false');
  }
  function toggleMenu(){ navbar.classList.contains('active') ? closeMenu() : openMenu(); }
  menuToggle.addEventListener('click', (e)=>{ e.stopPropagation(); toggleMenu(); });

  // Dropdown (mobile)
  function toggleDropdown(e){
    if (window.innerWidth <= 768){
      e.preventDefault();
      e.stopPropagation();
      const willBeActive = !dropdown.classList.contains('active');
      dropdown.classList.toggle('active');
      othersMenu.setAttribute('aria-expanded', willBeActive ? 'true' : 'false');
    }
  }
  othersMenu.addEventListener('click', toggleDropdown);
  othersMenu.addEventListener('keydown', (e)=>{ if (e.key==='Enter' || e.key===' ') toggleDropdown(e); });

  // Close on link click (mobile)
  navLinks.forEach(link=>{
    link.addEventListener('click', ()=>{ if (window.innerWidth <= 768){ setTimeout(closeMenu,300); }});
  });

  // Click outside to close (mobile)
  document.addEventListener('click', (e)=>{
    if (window.innerWidth <= 768 && !navbar.contains(e.target) && navbar.classList.contains('active')) closeMenu();
  });

  // Search
  function handleSearch(){
    const query = searchInput.value.trim();
    if (query){ alert(`অনুসন্ধান: "${query}"\nএই বৈশিষ্ট্যটি শীঘ্রই যোগ করা হবে।`); }
    else { alert('অনুগ্রহ করে অনুসন্ধানের জন্য কিছু লিখুন।'); }
  }
  searchBtn.addEventListener('click', handleSearch);
  searchInput.addEventListener('keypress', (e)=>{ if(e.key==='Enter') handleSearch(); });

  // Smooth scroll
  document.querySelectorAll('a[href^="#"]').forEach(anchor=>{
    anchor.addEventListener('click', function(e){
      const href = this.getAttribute('href');
      if (!href || href === '#') return;
      const targetId = href.substring(1);
      const target = document.getElementById(targetId);
      if (target){ e.preventDefault(); target.scrollIntoView({behavior:'smooth', block:'start'}); }
    });
  });

  // Navbar scroll effect
  function onScroll(){
    navbar.classList.toggle('scrolled', window.scrollY > 50);
  }
  window.addEventListener('scroll', onScroll);
  window.addEventListener('resize', onScroll);
  window.addEventListener('orientationchange', onScroll);

  // Resize handling
  window.addEventListener('resize', ()=>{ if (window.innerWidth > 768){ closeMenu(); }});
  document.addEventListener('DOMContentLoaded', ()=>{ closeMenu(); onScroll(); });
</script>
<script>
  /* ===== Images array from markup ===== */
  const images = Array.from(document.querySelectorAll('.gallery a'))
    .map(a => a.getAttribute('onclick').match(/openModal\('(.+?)'\)/)[1]);

  /* ===== Lightbox / Zoom ===== */
  const lb = document.getElementById('lightbox');
  const lbStage = document.getElementById('lbStage');
  const lbImg = document.getElementById('lbImg');
  const lbTitle = document.getElementById('lbTitle');
  const lbCounter = document.getElementById('lbCounter');
  const lbClose = document.getElementById('lbClose');
  const lbCloseTop = document.getElementById('lbCloseTop');
  const lbPrev = document.getElementById('lbPrev');
  const lbNext = document.getElementById('lbNext');
  const arrowLeft = document.getElementById('arrowLeft');
  const arrowRight = document.getElementById('arrowRight');
  const zoomInBtn = document.getElementById('zoomIn');
  const zoomOutBtn = document.getElementById('zoomOut');
  const zoomResetBtn = document.getElementById('zoomReset');
  const downloadBtn = document.getElementById('downloadBtn');

  let currentIndex = 0;
  let scale = 1, minScale = 1, maxScale = 6;
  let dx = 0, dy = 0; // translate
  let isDragging = false, startX = 0, startY = 0;

  function applyTransform(){
    lbImg.style.transform = `translate(calc(-50% + ${dx}px), calc(-50% + ${dy}px)) scale(${scale})`;
  }
  function setCounter(){ lbCounter.textContent = `${currentIndex+1} / ${images.length}`; }
  function setTitle(){ lbTitle.textContent = images[currentIndex].split('/').pop(); }
  function setDownload(){ downloadBtn.href = images[currentIndex]; downloadBtn.setAttribute('download', `image-${currentIndex+1}.jpg`); }

  function openModal(src){
    currentIndex = images.indexOf(src);
    if(currentIndex === -1) currentIndex = 0;
    scale = 1; dx = 0; dy = 0;
    lbImg.src = images[currentIndex];
    lbImg.alt = setTitle();
    setCounter(); setDownload(); applyTransform();
    lb.classList.add('open'); document.body.style.overflow='hidden';
  }
  function closeModal(){ lb.classList.remove('open'); lbImg.src=''; document.body.style.overflow=''; }
  function nextImage(){ currentIndex=(currentIndex+1)%images.length; openModal(images[currentIndex]); }
  function prevImage(){ currentIndex=(currentIndex-1+images.length)%images.length; openModal(images[currentIndex]); }

  // Expose to inline onclicks
  window.openModal = openModal;

  // Close / nav buttons
  if(lbClose) lbClose.addEventListener('click', closeModal);
  if(lbCloseTop) lbCloseTop.addEventListener('click', closeModal);
  lb.addEventListener('click', (e)=>{ if(e.target===lb) closeModal(); });
  lbNext.addEventListener('click', ()=> nextImage());
  lbPrev.addEventListener('click', ()=> prevImage());
  arrowRight.addEventListener('click', ()=> nextImage());
  arrowLeft.addEventListener('click', ()=> prevImage());

  // Keyboard
  document.addEventListener('keydown', (e)=>{
    if(!lb.classList.contains('open')) return;
    if(e.key==='Escape') closeModal();
    if(e.key==='ArrowRight') nextImage();
    if(e.key==='ArrowLeft') prevImage();
    if(e.key==='+') zoomBy(1.2);
    if(e.key==='-') zoomBy(1/1.2);
    if(e.key==='0') resetZoom();
  });

  // Zoom helpers
  function zoomBy(factor, centerX=null, centerY=null){
    const newScale = Math.min(maxScale, Math.max(minScale, scale * factor));
    if(newScale === scale) return;

    if(centerX!==null && centerY!==null){
      const rect = lbStage.getBoundingClientRect();
      const cx = centerX - rect.left - rect.width/2 - dx;
      const cy = centerY - rect.top - rect.height/2 - dy;
      dx -= cx * (newScale/scale - 1);
      dy -= cy * (newScale/scale - 1);
    }
    scale = newScale; applyTransform();
  }
  function resetZoom(){ scale=1; dx=0; dy=0; applyTransform(); }
  zoomInBtn.addEventListener('click', ()=> zoomBy(1.2, lbStage.clientWidth/2, lbStage.clientHeight/2));
  zoomOutBtn.addEventListener('click', ()=> zoomBy(1/1.2, lbStage.clientWidth/2, lbStage.clientHeight/2));
  zoomResetBtn.addEventListener('click', resetZoom);

  // Wheel zoom
  lbStage.addEventListener('wheel', (e)=>{
    e.preventDefault();
    const factor = e.deltaY < 0 ? 1.15 : 1/1.15;
    zoomBy(factor, e.clientX, e.clientY);
  }, { passive:false });

  // Drag to pan
  lbStage.addEventListener('mousedown', (e)=>{
    isDragging = true; startX=e.clientX; startY=e.clientY; lbStage.style.cursor='grabbing';
  });
  window.addEventListener('mousemove', (e)=>{
    if(!isDragging) return;
    dx += (e.clientX - startX); dy += (e.clientY - startY);
    startX = e.clientX; startY = e.clientY; applyTransform();
  });
  window.addEventListener('mouseup', ()=>{ isDragging=false; lbStage.style.cursor='default'; });

  // Double click zoom toggle
  lbStage.addEventListener('dblclick', (e)=>{ if(scale===1){ zoomBy(2, e.clientX, e.clientY); } else { resetZoom(); } });

  // Touch pinch-zoom + pan
  let touchMode = { distance:0, lastX:0, lastY:0 };
  function getTouches(e){ return Array.from(e.touches).map(t=>({x:t.clientX,y:t.clientY})); }
  function dist(a,b){ const dx=a.x-b.x, dy=a.y-b.y; return Math.hypot(dx,dy); }
  function mid(a,b){ return [(a.x+b.x)/2,(a.y+b.y)/2]; }

  lbStage.addEventListener('touchstart', (e)=>{
    if(e.touches.length===2){
      const [p1,p2]=getTouches(e); touchMode.distance=dist(p1,p2);
    } else if(e.touches.length===1){
      touchMode.lastX=e.touches[0].clientX; touchMode.lastY=e.touches[0].clientY;
    }
  }, {passive:true});

  lbStage.addEventListener('touchmove', (e)=>{
    if(e.touches.length===2){
      e.preventDefault();
      const [p1,p2]=getTouches(e);
      const newDist=dist(p1,p2);
      const [cx,cy]=mid(p1,p2);
      zoomBy(newDist/(touchMode.distance||newDist), cx, cy);
      touchMode.distance=newDist;
    } else if(e.touches.length===1 && scale>1){
      const x=e.touches[0].clientX, y=e.touches[0].clientY;
      dx += (x-touchMode.lastX); dy += (y-touchMode.lastY);
      touchMode.lastX=x; touchMode.lastY=y; applyTransform();
    }
  }, {passive:false});

  // Also open by clicking the thumb image (no inline)
  document.getElementById('galleryContainer').addEventListener('click', (e)=>{
    const img = e.target.closest('.gallery img');
    if(img){
      const src = img.getAttribute('src');
      const idx = images.indexOf(src);
      if(idx>-1) openModal(src);
    }
  });
</script>
</body>
</html>
